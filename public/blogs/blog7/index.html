<!DOCTYPE HTML>
<html>

    <head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
	<meta name="description" content="Hi! My name is Noor. Welcome to my analytics website!">
	<meta name="author" content="Noor Alameri">
	<meta name="generator" content="Hugo 0.74.3" />
	<title>Blog7 &middot; Portfolio website for N Alameri</title>
	<!-- Stylesheets -->
	
	<link rel="stylesheet" href="/css/main.css"/>
	
	

	

	<!-- Custom Fonts -->
	<link href="/css/font-awesome.min.css" rel="stylesheet" type="text/css">

	
	<link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
	<link rel="icon" type="image/x-icon" href="/favicon.ico">
	

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="js/ie/html5shiv.js"></script>
	<script src="js/ie/html5shiv.jsrespond.min.js"></script>
	<![endif]-->
</head>

    <body>

    <!-- Wrapper -->
        <div id="wrapper">

            <!-- Header -->
    <header id="header" class="alt">
        <a href="/" class="logo"><strong>Portfolio website for Noor Alameri</strong> <span></span></a>
        <nav>
            <a href="#menu">Menu</a>
        </nav>
    </header>

<!-- Menu -->
    <nav id="menu">
        <ul class="links">
            
                <li><a href="/">Home</a></li>
            
                <li><a href="/blogs">Blogs</a></li>
            

        </ul>
        <ul class="actions vertical">
            
                <li><a href="/blogs" class="button special fit">My Projects</a></li>
            
            
        </ul>
    </nav>

        <!-- Main -->
            <div id="main" class="alt">

                
                    <section id="one">
                        <div class="inner">
                            <header class="major">
                                <h1>Blog7</h1>
                            </header>
                            
                            
<script src="/rmarkdown-libs/kePrint/kePrint.js"></script>
<link href="/rmarkdown-libs/lightable/lightable.css" rel="stylesheet" />


<pre class="r"><code>library(tidyverse) #load libraries</code></pre>
<pre><code>## -- Attaching packages --------------------------------------------------- tidyverse 1.3.0 --</code></pre>
<pre><code>## v ggplot2 3.3.2     v purrr   0.3.4
## v tibble  3.0.3     v dplyr   1.0.2
## v tidyr   1.1.2     v stringr 1.4.0
## v readr   1.3.1     v forcats 0.5.0</code></pre>
<pre><code>## -- Conflicts ------------------------------------------------------ tidyverse_conflicts() --
## x dplyr::filter() masks stats::filter()
## x dplyr::lag()    masks stats::lag()</code></pre>
<pre class="r"><code>library(mosaic)</code></pre>
<pre><code>## Loading required package: lattice</code></pre>
<pre><code>## Loading required package: ggformula</code></pre>
<pre><code>## Loading required package: ggstance</code></pre>
<pre><code>## 
## Attaching package: &#39;ggstance&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:ggplot2&#39;:
## 
##     geom_errorbarh, GeomErrorbarh</code></pre>
<pre><code>## 
## New to ggformula?  Try the tutorials: 
##  learnr::run_tutorial(&quot;introduction&quot;, package = &quot;ggformula&quot;)
##  learnr::run_tutorial(&quot;refining&quot;, package = &quot;ggformula&quot;)</code></pre>
<pre><code>## Loading required package: mosaicData</code></pre>
<pre><code>## Loading required package: Matrix</code></pre>
<pre><code>## 
## Attaching package: &#39;Matrix&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:tidyr&#39;:
## 
##     expand, pack, unpack</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;mosaic&#39;:
##   method                           from   
##   fortify.SpatialPolygonsDataFrame ggplot2</code></pre>
<pre><code>## 
## The &#39;mosaic&#39; package masks several functions from core packages in order to add 
## additional features.  The original behavior of these functions should not be affected by this.
## 
## Note: If you use the Matrix package, be sure to load it BEFORE loading mosaic.
## 
## Have you tried the ggformula package for your plots?</code></pre>
<pre><code>## 
## Attaching package: &#39;mosaic&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:Matrix&#39;:
## 
##     mean</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     count, do, tally</code></pre>
<pre><code>## The following object is masked from &#39;package:purrr&#39;:
## 
##     cross</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     stat</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     binom.test, cor, cor.test, cov, fivenum, IQR, median, prop.test,
##     quantile, sd, t.test, var</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     max, mean, min, prod, range, sample, sum</code></pre>
<pre class="r"><code>library(ggthemes)</code></pre>
<pre><code>## 
## Attaching package: &#39;ggthemes&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:mosaic&#39;:
## 
##     theme_map</code></pre>
<pre class="r"><code>library(lubridate)</code></pre>
<pre><code>## 
## Attaching package: &#39;lubridate&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     date, intersect, setdiff, union</code></pre>
<pre class="r"><code>library(fivethirtyeight)</code></pre>
<pre><code>## Some larger datasets need to be installed separately, like senators and
## house_district_forecast. To install these, we recommend you install the
## fivethirtyeightdata package by running:
## install.packages(&#39;fivethirtyeightdata&#39;, repos =
## &#39;https://fivethirtyeightdata.github.io/drat/&#39;, type = &#39;source&#39;)</code></pre>
<pre class="r"><code>library(here)</code></pre>
<pre><code>## here() starts at C:/Users/NOOR/Documents/R/PortfolioNoorA</code></pre>
<pre class="r"><code>library(skimr)</code></pre>
<pre><code>## 
## Attaching package: &#39;skimr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:mosaic&#39;:
## 
##     n_missing</code></pre>
<pre class="r"><code>library(janitor)</code></pre>
<pre><code>## 
## Attaching package: &#39;janitor&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     chisq.test, fisher.test</code></pre>
<pre class="r"><code>library(vroom)
library(tidyquant)</code></pre>
<pre><code>## Loading required package: PerformanceAnalytics</code></pre>
<pre><code>## Loading required package: xts</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<pre><code>## 
## Attaching package: &#39;xts&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:dplyr&#39;:
## 
##     first, last</code></pre>
<pre><code>## 
## Attaching package: &#39;PerformanceAnalytics&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     legend</code></pre>
<pre><code>## Loading required package: quantmod</code></pre>
<pre><code>## Loading required package: TTR</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;quantmod&#39;:
##   method            from
##   as.zoo.data.frame zoo</code></pre>
<pre><code>## Version 0.4-0 included new data defaults. See ?getSymbols.</code></pre>
<pre><code>## == Need to Learn tidyquant? ================================================================
## Business Science offers a 1-hour course - Learning Lab #9: Performance Analysis &amp; Portfolio Optimization with tidyquant!
## &lt;/&gt; Learn more at: https://university.business-science.io/p/learning-labs-pro &lt;/&gt;</code></pre>
<pre class="r"><code>library(kableExtra)</code></pre>
<pre><code>## 
## Attaching package: &#39;kableExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     group_rows</code></pre>
<pre class="r"><code>library(broom)
library(GGally)</code></pre>
<pre><code>## Registered S3 method overwritten by &#39;GGally&#39;:
##   method from   
##   +.gg   ggplot2</code></pre>
<pre class="r"><code>library(huxtable)</code></pre>
<pre><code>## 
## Attaching package: &#39;huxtable&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:GGally&#39;:
## 
##     wrap</code></pre>
<pre><code>## The following object is masked from &#39;package:kableExtra&#39;:
## 
##     add_footnote</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     add_rownames</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     theme_grey</code></pre>
<div id="gapminder-revisited" class="section level1">
<h1>Gapminder revisited</h1>
<p>Recall the <code>gapminder</code> data frame from the gapminder package. That data frame contains just six columns from the larger <a href="https://www.gapminder.org/data/">data in Gapminder World</a>. In this part, we will join a few dataframes with more data than the ‘gapminder’ package. They are</p>
<ul>
<li>HIV prevalence (adults_with_hiv_percent_age_15_49.csv): The estimated number of people living with HIV per 100 population of age group 15-49.</li>
<li>Life expectancy at birth (life_expectancy_years.csv)</li>
<li>The World Bank’s data of GDP per capita in constant 2010 US$, Female fertility <em>(The number of babies per woman)</em>, Primary school enrollment <em>(% of children attending primary school)</em>, Mortality rate <em>(for under 5, per 1000 live births)</em>.</li>
</ul>
<p>Firstly, we download the raw data.</p>
<pre class="r"><code># load gapminder HIV data
hiv &lt;- read_csv(here::here(&quot;data&quot;,&quot;adults_with_hiv_percent_age_15_49.csv&quot;))</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   country = col_character(),
##   `1988` = col_logical(),
##   `1989` = col_logical()
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre class="r"><code>life_expectancy &lt;- read_csv(here::here(&quot;data&quot;,&quot;life_expectancy_years.csv&quot;))</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   country = col_character()
## )
## See spec(...) for full column specifications.</code></pre>
<pre class="r"><code># get World bank data using wbstats
indicators &lt;- c(&quot;SP.DYN.TFRT.IN&quot;,&quot;SE.PRM.NENR&quot;, &quot;SH.DYN.MORT&quot;, &quot;NY.GDP.PCAP.KD&quot;)

library(wbstats)

worldbank_data &lt;- wb_data(country=&quot;countries_only&quot;, #countries only- no aggregates like Latin America, Europe, etc.
                          indicator = indicators, 
                          start_date = 1960, 
                          end_date = 2016) %&gt;% 
                  rename(fertility = SP.DYN.TFRT.IN,
                         GDP_cap = NY.GDP.PCAP.KD,
                         prim_enrol = SE.PRM.NENR,
                         mortality = SH.DYN.MORT) # rename the col to make it more readable

# get a dataframe of information regarding countries, indicators, sources, regions, indicator topics, lending types, income levels,  from the World Bank API 
countries &lt;-  wbstats::wb_cachelist$countries</code></pre>
<p>Then, let’s join the 3 dataframes (life_expectancy, worldbank_data, and HIV) into one.</p>
<p>Since each dataset varies in the countries and years they covered, the method used here is full join in order NOT to delete any information. However if we keep all data, there might be NAs, but we can later on still filter out NAs, but ONLY FOR THE COLUMNS WE ANALYSE!</p>
<p>In addition, for further grouping analysis purpose, we also match additional information to each country using a left join.
In this case, it is a left join, because we do only need additional information for the countries we already have in our dataset.</p>
<pre class="r"><code>library(countrycode)
library(gapminder)

# tidy data

life_expectancy_long &lt;- life_expectancy %&gt;%
  # bring into long format
  pivot_longer(cols = &#39;1800&#39;:&#39;2100&#39;, names_to = &quot;date&quot;, values_to = &quot;life_exp&quot;) %&gt;%
  mutate(date = as.double(date),
         iso3c = countrycode(country, # get iso3c code
                             origin = &#39;country.name&#39;,
                             destination = &#39;iso3c&#39;))

hiv_long &lt;- hiv %&gt;%
  # bring into long format
  pivot_longer(cols = &#39;1979&#39;:&#39;2011&#39;, names_to = &quot;date&quot;, values_to = &quot;hiv_prev&quot;) %&gt;%
  mutate(date = as.double(date),
         iso3c = countrycode(country, # get iso3c code
                             origin = &#39;country.name&#39;, 
                             destination = &#39;iso3c&#39;))

#join the 3 dataframes (life_expectancy, worldbank_data, and HIV) into one
joined_df &lt;- full_join(subset(life_expectancy_long, select = -c(country)),
                       full_join(subset(hiv_long, select = -c(country)),
                                 subset(worldbank_data, select = -c(iso2c),
                                 by = c(&quot;iso3c&quot;,&quot;date&quot;))),
                       by = c(&quot;iso3c&quot;,&quot;date&quot;))</code></pre>
<pre><code>## Joining, by = c(&quot;date&quot;, &quot;iso3c&quot;)</code></pre>
<pre class="r"><code># add additional info via left join
joined_df_region &lt;- joined_df %&gt;% 
  left_join(subset(countries, select = -c(country)), by = &quot;iso3c&quot;)</code></pre>
<p>Now we have all the data in hand, including HIV prevalence, Life expectancy, GDP per capita, Female fertility, Primary school enrollment, and Mortality rate. Let’s check they relationships one by one.</p>
<div id="hiv-prevalence-and-life-expectancy-by-region" class="section level2">
<h2>HIV prevalence and life expectancy, by region</h2>
<p>Our first question would be - What is the relationship between HIV prevalence and life expectancy?</p>
<pre class="r"><code>joined_df %&gt;%
  drop_na(c(hiv_prev,life_exp)) %&gt;%
  ggplot(aes(x = hiv_prev/100, y = life_exp)) + # hiv_prevalence is &quot;The estimated number of people living with HIV per 100 population of age group 15-49.&quot;
  geom_point(alpha = 0.2) +
  geom_smooth()+ # added smoothed line
  scale_x_continuous(labels = scales::percent) + # scale with percentages
  theme_bw() + 
  labs(title = &quot;Lower life expectancy with higher HIV prevalence&quot;,
       subtitle = &quot;Life expectancy in different countries and years by HIV prevalence&quot;,
       x = &quot;HIV prevalence in age group 15-49&quot;,
       y = &quot;life expectancy&quot;,
       caption = &quot;Source: World Bank&quot;)+
  NULL</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="/blogs/blog7_files/figure-html/hiv_life_exp-1.png" width="672" /></p>
<pre class="r"><code>joined_df_region %&gt;%
  drop_na(c(hiv_prev,life_exp)) %&gt;%
  filter(region %in% c(&quot;Latin America &amp; Caribbean&quot;, &quot;Sub-Saharan Africa&quot;)) %&gt;%
  ggplot(aes(x = hiv_prev/100, y = life_exp)) + # hiv_prevalence is &quot;The estimated number of people living with HIV per 100 population of age group 15-49.&quot;
  geom_point(alpha = 0.2) +
  geom_smooth()+ # add smoothed line
  scale_x_continuous(labels = scales::percent) + # scale with percentages
  theme_bw() + 
  labs(title = &quot;Lower life expectancy with higher HIV prevalence&quot;,
       subtitle = &quot;Life expectancy in different countries and years by HIV prevalence&quot;,
       x = &quot;HIV prevalence in age group 15-49&quot;,
       y = &quot;life expectancy&quot;,
       caption = &quot;Source: World Bank&quot;)+
  facet_wrap(~region, scales = &quot;free&quot;)+
  NULL</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;loess&#39; and formula &#39;y ~ x&#39;</code></pre>
<p><img src="/blogs/blog7_files/figure-html/hiv_life_exp-2.png" width="672" /></p>
<p>From a general view, we know in the range between 0%-7% of HIV prevalence, the life expectancy decrease pretty quickly as HIV prevalence raises. When HIV prevalence exceed 7%, the life expectancy doesn’t significantly continue to decrease, because of few observations and the fact that ~50 is already the worst life expectancy for HIV.</p>
<p>Zooming in to see what’s going on for specific regions, the results are similar.</p>
</div>
<div id="fertility-rate-and-gdp-per-capita-by-region" class="section level2">
<h2>Fertility rate and GDP per capita, by region</h2>
<p>We’re also curious about the the relationship between fertility rate and GDP per capita. Let’s take a look.</p>
<pre class="r"><code>joined_df %&gt;%
  drop_na(c(fertility, GDP_cap)) %&gt;%
  ggplot(aes(x = fertility, y = GDP_cap)) +
  geom_point(alpha = 0.2) +
  geom_smooth()+ # add smoothed line
  scale_y_log10() + # logarithmic scale
  theme_bw() + 
  labs(title = &quot;Lower GDP per capita with higher fertility&quot;,
       subtitle = &quot;GDP per capita in different countries and years by fertility&quot;,
       x = &quot;fertility (no. of babies per woman)&quot;,
       y = &quot;GDP per capita (log scale)&quot;,
       caption = &quot;Source: World Bank&quot;)+
  NULL</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="/blogs/blog7_files/figure-html/fertility_GDP_cap-1.png" width="672" /></p>
<pre class="r"><code>joined_df_region %&gt;%
  drop_na(c(fertility, GDP_cap)) %&gt;%
  ggplot(aes(x = fertility, y = GDP_cap)) + 
  geom_point(alpha = 0.2) +
  geom_smooth() + # add smoothed line
  scale_y_log10() + # logarithmic scale
  theme_bw() + 
  labs(title = &quot;Lower GDP per capita with higher fertility&quot;,
       subtitle = &quot;GDP per capita in different countries and years by fertility&quot;,
       x = &quot;fertility (no. of babies per woman)&quot;,
       y = &quot;GDP per capita (log scale)&quot;,
       caption = &quot;Source: World Bank&quot;)+
  facet_wrap(~region, scales = &quot;free&quot;)+ # faceting by region
  NULL</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="/blogs/blog7_files/figure-html/fertility_GDP_cap-2.png" width="672" /></p>
<p>Not surprisingly, the lower GDP per capita, the higher fertility. There are complicated economics and sociology reasons behind it, such as hoping for demographic dividend to drive the GDP, and stronger social welfare system decreasing the need of children support when retired.</p>
<p>For regions having more 3rd world countries, the trend are more rapid, corresponding to their economics growth.</p>
</div>
<div id="missing-hiv-data-by-region" class="section level2">
<h2>Missing HIV data by region</h2>
<p>When analyzing the HIV prevalence, we found a lot missing values. Which regions have the most observations with missing HIV data?</p>
<pre class="r"><code>hiv_long_region &lt;- left_join(hiv_long, 
                             countries,
                             by = &quot;iso3c&quot;)

hiv_long_region %&gt;%
  group_by(region) %&gt;%
  summarise(num_na = sum(is.na(hiv_prev))) %&gt;%
  ggplot(aes(x = num_na, y = reorder(region,num_na))) +
  geom_col() +
  theme_bw() + 
  labs(y = &quot;&quot;, 
       x = &quot;Count of observations with missing HIV data&quot;,
       title = &quot;Observations with missing HIV data by region&quot;)</code></pre>
<pre><code>## `summarise()` ungrouping output (override with `.groups` argument)</code></pre>
<p><img src="/blogs/blog7_files/figure-html/missing_hiv_Data-1.png" width="672" /></p>
</div>
<div id="change-of-mortality-rate-for-under-5-by-region" class="section level2">
<h2>Change of mortality rate for under 5, by region</h2>
<p>How has mortality rate for under 5 changed by region? We plot the overall picture and the top/bottom five countries in each region.</p>
<pre class="r"><code>joined_df_region %&gt;%
  drop_na(mortality) %&gt;%
  ggplot(aes(x = date, y = mortality)) +
  theme_bw() +
  geom_line(aes(group = iso3c, color = iso3c)) + # add lines
  theme(legend.position = &quot;none&quot;) +
  labs(title = &quot;Mortality for under 5 dropped in all regions!&quot;,
     subtitle = &quot;Development of mortality (under 5) in different regions over the past years&quot;,
     x = &quot;&quot;,
     y = &quot;mortality for under 5, per 1000 live births&quot;) +
  facet_wrap(~region) + # faceting by region
  NULL</code></pre>
<p><img src="/blogs/blog7_files/figure-html/mortality_rate_change-1.png" width="672" /></p>
<pre class="r"><code># calculate improvement in mortality per country
mortality_ranking &lt;- joined_df_region %&gt;%
  drop_na(mortality) %&gt;%
  arrange(iso3c, date) %&gt;%
  group_by(region, country) %&gt;%
  summarise(early_m = first(mortality), # get the earliest recorded value in mortality
            latest_m = last(mortality), # get the latest recorded value in mortality
            improvement_m =  - (latest_m - early_m)/early_m) %&gt;% # calculate difference / improvement
  arrange(region, desc(improvement_m))</code></pre>
<pre><code>## `summarise()` regrouping output by &#39;region&#39; (override with `.groups` argument)</code></pre>
<pre class="r"><code># Top 5

mortality_ranking %&gt;% 
  top_n(5, improvement_m) %&gt;%
  select(&#39;region&#39;,&#39;country&#39;,&#39;improvement_m&#39;) %&gt;%
  rename(&#39;top 5 countries&#39; = country,
         &#39;mortality improvement&#39; = improvement_m) %&gt;% # have readable names
  kbl() %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;)) # have a nice HTML table</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
region
</th>
<th style="text-align:left;">
top 5 countries
</th>
<th style="text-align:right;">
mortality improvement
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
Korea, Rep. 
</td>
<td style="text-align:right;">
0.9696970
</td>
</tr>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
Singapore
</td>
<td style="text-align:right;">
0.9433962
</td>
</tr>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
Japan
</td>
<td style="text-align:right;">
0.9319899
</td>
</tr>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
Thailand
</td>
<td style="text-align:right;">
0.9296448
</td>
</tr>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
China
</td>
<td style="text-align:right;">
0.9158163
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Portugal
</td>
<td style="text-align:right;">
0.9685590
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Turkey
</td>
<td style="text-align:right;">
0.9529549
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Italy
</td>
<td style="text-align:right;">
0.9344894
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Cyprus
</td>
<td style="text-align:right;">
0.9319372
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Poland
</td>
<td style="text-align:right;">
0.9278034
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
Chile
</td>
<td style="text-align:right;">
0.9509866
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
Peru
</td>
<td style="text-align:right;">
0.9340949
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
El Salvador
</td>
<td style="text-align:right;">
0.9204115
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
Ecuador
</td>
<td style="text-align:right;">
0.9157655
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
Antigua and Barbuda
</td>
<td style="text-align:right;">
0.9141531
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
Oman
</td>
<td style="text-align:right;">
0.9667158
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
Bahrain
</td>
<td style="text-align:right;">
0.9627016
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
United Arab Emirates
</td>
<td style="text-align:right;">
0.9610778
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
Libya
</td>
<td style="text-align:right;">
0.9540230
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
Saudi Arabia
</td>
<td style="text-align:right;">
0.9507788
</td>
</tr>
<tr>
<td style="text-align:left;">
North America
</td>
<td style="text-align:left;">
Canada
</td>
<td style="text-align:right;">
0.8404908
</td>
</tr>
<tr>
<td style="text-align:left;">
North America
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:right;">
0.7774086
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
Maldives
</td>
<td style="text-align:right;">
0.9688013
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
Sri Lanka
</td>
<td style="text-align:right;">
0.9127660
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
Nepal
</td>
<td style="text-align:right;">
0.8927464
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
Bhutan
</td>
<td style="text-align:right;">
0.8867925
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
Bangladesh
</td>
<td style="text-align:right;">
0.8627978
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Cabo Verde
</td>
<td style="text-align:right;">
0.9000552
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Mauritius
</td>
<td style="text-align:right;">
0.8609779
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Seychelles
</td>
<td style="text-align:right;">
0.8583732
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Malawi
</td>
<td style="text-align:right;">
0.8583569
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Gambia, The
</td>
<td style="text-align:right;">
0.8395781
</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Bottom 5

mortality_ranking %&gt;% 
  top_n(-5, improvement_m) %&gt;%
  select(&#39;region&#39;,&#39;country&#39;,&#39;improvement_m&#39;) %&gt;%
  arrange(region, improvement_m) %&gt;%
  rename(&#39;bottom 5 countries&#39; = country,
         &#39;mortality improvement&#39; = improvement_m) %&gt;% # have readable names
  kbl() %&gt;%
  kable_styling(bootstrap_options = c(&quot;striped&quot;, &quot;hover&quot;, &quot;condensed&quot;, &quot;responsive&quot;)) # have a nice HTML table</code></pre>
<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
region
</th>
<th style="text-align:left;">
bottom 5 countries
</th>
<th style="text-align:right;">
mortality improvement
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
Micronesia, Fed. Sts.
</td>
<td style="text-align:right;">
0.4247788
</td>
</tr>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
Korea, Dem. People’s Rep. 
</td>
<td style="text-align:right;">
0.4301994
</td>
</tr>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
Palau
</td>
<td style="text-align:right;">
0.4752747
</td>
</tr>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
Nauru
</td>
<td style="text-align:right;">
0.5425101
</td>
</tr>
<tr>
<td style="text-align:left;">
East Asia &amp; Pacific
</td>
<td style="text-align:left;">
Tuvalu
</td>
<td style="text-align:right;">
0.6720497
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Monaco
</td>
<td style="text-align:right;">
0.6494845
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Turkmenistan
</td>
<td style="text-align:right;">
0.6822289
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Slovak Republic
</td>
<td style="text-align:right;">
0.7175926
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Ukraine
</td>
<td style="text-align:right;">
0.7278107
</td>
</tr>
<tr>
<td style="text-align:left;">
Europe &amp; Central Asia
</td>
<td style="text-align:left;">
Moldova
</td>
<td style="text-align:right;">
0.7613105
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
Bahamas, The
</td>
<td style="text-align:right;">
0.5389831
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
Guyana
</td>
<td style="text-align:right;">
0.6507592
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
Suriname
</td>
<td style="text-align:right;">
0.6555360
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
Venezuela, RB
</td>
<td style="text-align:right;">
0.6944444
</td>
</tr>
<tr>
<td style="text-align:left;">
Latin America &amp; Caribbean
</td>
<td style="text-align:left;">
Trinidad and Tobago
</td>
<td style="text-align:right;">
0.7174556
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
Djibouti
</td>
<td style="text-align:right;">
0.6351039
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
West Bank and Gaza
</td>
<td style="text-align:right;">
0.8044693
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
Malta
</td>
<td style="text-align:right;">
0.8238213
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
Iraq
</td>
<td style="text-align:right;">
0.8510417
</td>
</tr>
<tr>
<td style="text-align:left;">
Middle East &amp; North Africa
</td>
<td style="text-align:left;">
Yemen, Rep. 
</td>
<td style="text-align:right;">
0.8613958
</td>
</tr>
<tr>
<td style="text-align:left;">
North America
</td>
<td style="text-align:left;">
United States
</td>
<td style="text-align:right;">
0.7774086
</td>
</tr>
<tr>
<td style="text-align:left;">
North America
</td>
<td style="text-align:left;">
Canada
</td>
<td style="text-align:right;">
0.8404908
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
Pakistan
</td>
<td style="text-align:right;">
0.7076070
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
0.8038305
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
India
</td>
<td style="text-align:right;">
0.8305717
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
Bangladesh
</td>
<td style="text-align:right;">
0.8627978
</td>
</tr>
<tr>
<td style="text-align:left;">
South Asia
</td>
<td style="text-align:left;">
Bhutan
</td>
<td style="text-align:right;">
0.8867925
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Somalia
</td>
<td style="text-align:right;">
0.3458991
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Chad
</td>
<td style="text-align:right;">
0.5007949
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Namibia
</td>
<td style="text-align:right;">
0.5110876
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Lesotho
</td>
<td style="text-align:right;">
0.5152488
</td>
</tr>
<tr>
<td style="text-align:left;">
Sub-Saharan Africa
</td>
<td style="text-align:left;">
Equatorial Guinea
</td>
<td style="text-align:right;">
0.5414141
</td>
</tr>
</tbody>
</table>
</div>
<div id="primary-school-enrollment-and-fertility-rate" class="section level2">
<h2>Primary school enrollment and fertility rate</h2>
<p>Is there a relationship between primary school enrollment and fertility rate?</p>
<pre class="r"><code>joined_df_region %&gt;%
  drop_na(c(prim_enrol,fertility)) %&gt;%
  ggplot(aes(x = prim_enrol/100, y = fertility))+
  geom_point(alpha = 0.2)+
  geom_smooth()+ # add smoothed line
  theme_bw()+
  labs(title = &quot;The more people are engaged in primary education, \nthe less is the fertility rate&quot;,
       subtitle = &quot;Fertility under different primary school enrolment rate by countries and years&quot;,
       x = &quot;primary school enrolment rate&quot;,
       y = &quot;fertility (no. of babies per woman)&quot;,
       caption = &quot;Source: World Bank&quot;) +
  scale_x_continuous(label = scales::percent) + # have percentages
  NULL</code></pre>
<pre><code>## `geom_smooth()` using method = &#39;gam&#39; and formula &#39;y ~ s(x, bs = &quot;cs&quot;)&#39;</code></pre>
<p><img src="/blogs/blog7_files/figure-html/primary_enrollment_fertility-1.png" width="672" /></p>
<p>High levels of primary school enrollment are associated with fertility rate declines. This indicates a decline in patriarchy, change in women’s familial roles and a shift to a more egalitarian family structure. It would be better for us to gain women school enrollment, because in general increases in female education mean higher status and more power for women.</p>
</div>
</div>

                        </div>
                    </section>
            <!-- Disqus Inject -->
                
            </div>
            
        <!-- Footer -->
            
                <!-- Footer -->
    <footer id="footer">
        <div class="inner">
            <ul class="icons">
                
                    <li><a href="" class="icon alt " target="_blank"><span class="label"></span></a></li>
                
                    <li><a href="" class="icon alt " target="_blank"><span class="label"></span></a></li>
                
                    <li><a href="" class="icon alt " target="_blank"><span class="label"></span></a></li>
                
                    <li><a href="https://github.com/NoorAlameri" class="icon alt fa-github" target="_blank"><span class="label">GitHub</span></a></li>
                
                    <li><a href="https://www.linkedin.com/in/nooralameri/" class="icon alt fa-linkedin" target="_blank"><span class="label">LinkedIn</span></a></li>
                
            </ul>
            <ul class="copyright">
                <li>&copy; LBS</li>
                
                <li>Design:  <a href="https://www.html5up.net">HTML5 UP</a></li>
                
            </ul>
        </div>
    </footer>

            
        </div>

    <!-- Scripts -->
        <!-- Scripts -->
    <!-- jQuery -->
    <script src="/js/jquery.min.js"></script>
    <script src="/js/jquery.scrolly.min.js"></script>
    <script src="/js/jquery.scrollex.min.js"></script>
    <script src="/js/skel.min.js"></script>
    <script src="/js/util.js"></script>

    

    <!-- Main JS -->
    <script src="/js/main.js"></script>

    

    

    </body>
</html>
